# 專案上下文

## 目的
FactGate 是一個 MCP (Model Context Protocol) 伺服器，旨在透過提供事實查核與驗證能力來防止 AI 幻覺。本專案解決了 AI 模型自信地生成錯誤或無法驗證資訊的問題，提供可重複使用的、基於伺服器的解決方案，能夠根據可靠的知識來源驗證和交叉參照 AI 生成的內容。

**目標：**
- 建立透過 MCP 協議存取的可靠事實查核服務
- 與 Claude 和其他 AI 系統整合，進行即時驗證
- 降低 AI 生成回應的幻覺風險
- 提供可擴展的事實驗證基礎架構

## 技術堆疊
- **執行環境：** Node.js 20.19.0 或更高版本
- **套件管理：** npm
- **開發框架：** @fission-ai/openspec v0.12.0（規格驅動開發）
- **CLI 工具：** Commander、Inquirer、Chalk、Zod、Ora
- **核心協議：** MCP (Model Context Protocol)

## 專案慣例

### 程式碼風格
- **簡潔優先方法：** 預設每次變更不超過 100 行新程式碼
- **單檔案實作**，除非複雜度證明有必要
- **採用經過驗證的模式**，而非前衛的解決方案
- **命名慣例：** 功能使用動詞-名詞格式（例如：`fact-validation`、`user-auth`）
- **程式碼可讀性：** 每個功能必須在 10 分鐘內能夠理解
- **避免使用框架**，除非有明確的理由

### 架構模式
- **規格驅動架構：** 所有功能在實作前都透過正式規格定義
- **基於提案的變更管理：** 功能和變更遵循三階段工作流程：
  1. **提案（Propose）：** 建立包含理由和設計的變更提案
  2. **實作（Implement）：** 遵循核准的規格
  3. **歸檔（Archive）：** 部署後移至歸檔
- **變更 ID 格式：** 使用 kebab-case，並加上動詞前綴（`add-`、`update-`、`remove-`、`refactor-`）
- **複雜度觸發條件：** 僅在以下情況增加架構複雜度：
  - 效能數據顯示當前方法不足
  - 規模需求存在（>1000 位使用者、>100MB 資料）
  - 多個經過驗證的使用案例需要抽象化
- **多服務變更：** 需要 `design.md` 在編碼前記錄架構決策

### 測試策略
- **規格驅動測試：** 測試驗證是否符合正式規格
- **場景導向驗證：** 規格中每個需求至少有一個場景
- **驗證檢查點：** 實作前使用 `openspec validate [change] --strict`
- **測試包含：** 實作任務包含「撰寫測試」檢查點
- **測試優先方法：** 測試應驗證規格需求是否達成

### Git 工作流程
- **分支策略：** 每個變更提案使用功能分支
- **分支命名：** `feature/[change-id]`（例如：`feature/add-fact-validation`）
- **提交慣例：** 語意化提交，與 OpenSpec 提案對齊
- **變更參照：** 所有提交應參照提案/變更 ID
- **Pull Request：** 必須參照變更提案，並根據 `proposal.md` 和 `design.md` 驗證
- **驗證門檻：** 程式碼審查在合併前根據規格驗證
- **變更歸檔：** 部署後，變更移至 `changes/archive/YYYY-MM-DD-[name]/`

## 領域上下文

**AI 幻覺問題：**
AI 模型可能以高度自信的方式生成看似合理但實際上是錯誤的資訊。這對於需要準確性的生產環境 AI 系統來說是個嚴重問題。

**FactGate 解決方案：**
- 透過 MCP 協議提供事實查核服務
- 讓其他 AI 系統能夠即時驗證資訊
- 可能與知識庫、API 或事實查核資料庫整合
- 設計為更大型 AI 系統中的可重複使用元件

**OpenSpec 框架上下文：**
本專案使用規格驅動開發。所有變更必須先以明確的需求和設計提案，經過驗證後再實作。這確保了設計意圖與實作之間的一致性。

## 重要限制

- **Node.js 版本需求：** 最低 v20.19.0（@fission-ai/openspec 的要求）
- **MCP 協議相容性：** 必須符合 Model Context Protocol 標準
- **單一服務專注：** 保持專注於事實查核/驗證，以維持清晰度
- **準確性關鍵：** 事實查核必須可靠；誤判（false positives/negatives）會產生實際影響
- **效能：** 必須快速回應，以便與 AI 系統即時整合

## 外部依賴

- **@fission-ai/openspec (v0.12.0)：** 規格驅動開發框架和 CLI
- **Model Context Protocol (MCP)：** AI 系統整合協議
- **事實查核來源：**（待確定）- 用於取得驗證資料的知識庫、API 或資料庫
- **Node.js 生態系統：** 標準 npm 套件（Commander、Inquirer、Chalk、Zod、Ora）