# 變更提案：新增可插拔事實來源適配器

## 摘要
引入可插拔適配器架構，讓 FactGate 能夠與多個事實查核來源協作，而無需修改核心程式碼。這在保持內建驗證器無依賴的同時，實現了可擴展性。

## 問題陳述
目前，FactGate 沒有結構化的方式來根據不同的事實來源驗證資訊。每個新來源都需要直接修改核心程式碼，造成緊密耦合和維護負擔。使用者無法輕鬆整合自己的知識庫、API 或資料庫。

## 建議解決方案
實作可插拔適配器模式，包含：
1. 所有事實來源必須實作的簡單、一致的介面
2. 無需外部依賴即可運作的內建驗證器（矛盾偵測、模式驗證、信心評分）
3. 註冊表和串聯機制，以組合多個來源
4. 包含信心分數和推理的結構化結果物件

## 效益
- **可擴展性：** 使用者可以新增新來源，無需 fork 或修改核心程式碼
- **模組化：** 核心驗證邏輯與事實來源分離
- **無需外部依賴：** 內建驗證器開箱即用
- **靈活性：** 來源可以輕鬆配置、替換或組合
- **更好的測試：** 每個適配器可以獨立測試
- **社群驅動：** 促進社群建立適配器的生態系統

## 影響評估

### 範圍
- 新增：核心適配器介面定義
- 新增：三個內建來源驗證器
- 新增：適配器註冊表和串聯邏輯
- 修改：FactGate 建構函式以接受適配器配置
- 修改：verify() 方法以協調適配器

### 工作量估計
- 小到中等工作量（約 20-30 小時）
- 核心介面和註冊表：約 4-6 小時
- 內建驗證器：約 8-12 小時
- 整合和測試：約 8-10 小時

### 風險等級
**低** - 向後相容（現有程式碼可以使用預設適配器）

### 受影響元件
- MCP 伺服器驗證邏輯
- 配置系統
- 結果結構和回應格式

## 成功標準
1. 適配器介面簡單到開發者可以在 50 行內實作
2. 內建驗證器回應時間 <500ms
3. 多個來源可以串聯而不會降低效能
4. 所有適配器遵循一致的錯誤處理模式
5. 提供清晰的文檔和範例自訂適配器
6. 所有內建驗證器的測試覆蓋率 >95%

## 依賴項
- 內建驗證器無需依賴
- 需要符合 MCP 協議
- 現有的 FactGate 核心驗證邏輯

## 時程
- 提案審查：1-2 天
- 實作：5-7 天
- 測試和改進：2-3 天
- 文檔：1 天
- 總計：約 10 天

## 相關議題
- 解決可擴展性問題
- 促進未來與外部事實查核 API 的整合
- 為社群適配器生態系統奠定基礎